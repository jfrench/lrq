<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>1&nbsp; R Foundations – A Progressive Introduction to Linear Models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data-exploration.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./r-foundations.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">R Foundations</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">A Progressive Introduction to Linear Models</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preliminaries</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-foundations.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">R Foundations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-exploration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Cleaning and Exploration</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./matrix-facts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Overview of matrix definitions, properties, operations, etc.</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setting-up-r-and-rstudio-desktop" id="toc-setting-up-r-and-rstudio-desktop" class="nav-link active" data-scroll-target="#setting-up-r-and-rstudio-desktop"><span class="header-section-number">1.1</span> Setting up R and RStudio Desktop</a>
  <ul class="collapse">
  <li><a href="#what-is-r" id="toc-what-is-r" class="nav-link" data-scroll-target="#what-is-r"><span class="header-section-number">1.1.1</span> What is R?</a></li>
  <li><a href="#installing-r" id="toc-installing-r" class="nav-link" data-scroll-target="#installing-r"><span class="header-section-number">1.1.2</span> Installing R</a></li>
  <li><a href="#installing-rstudio" id="toc-installing-rstudio" class="nav-link" data-scroll-target="#installing-rstudio"><span class="header-section-number">1.1.3</span> Installing RStudio</a></li>
  <li><a href="#rstudio-layout" id="toc-rstudio-layout" class="nav-link" data-scroll-target="#rstudio-layout"><span class="header-section-number">1.1.4</span> RStudio Layout</a></li>
  <li><a href="#customizing-the-rstudio-workspace" id="toc-customizing-the-rstudio-workspace" class="nav-link" data-scroll-target="#customizing-the-rstudio-workspace"><span class="header-section-number">1.1.5</span> Customizing the RStudio workspace</a></li>
  </ul></li>
  <li><a href="#running-code-scripts-and-comments" id="toc-running-code-scripts-and-comments" class="nav-link" data-scroll-target="#running-code-scripts-and-comments"><span class="header-section-number">1.2</span> Running code, scripts, and comments</a>
  <ul class="collapse">
  <li><a href="#hands-on-practice" id="toc-hands-on-practice" class="nav-link" data-scroll-target="#hands-on-practice">Hands-on Practice</a></li>
  </ul></li>
  <li><a href="#sec-assignment" id="toc-sec-assignment" class="nav-link" data-scroll-target="#sec-assignment"><span class="header-section-number">1.3</span> Assignment</a>
  <ul class="collapse">
  <li><a href="#hands-on-practice-1" id="toc-hands-on-practice-1" class="nav-link" data-scroll-target="#hands-on-practice-1">Hands-on Practice</a></li>
  </ul></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions"><span class="header-section-number">1.4</span> Functions</a></li>
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="header-section-number">1.5</span> Packages</a>
  <ul class="collapse">
  <li><a href="#hands-on-practice-2" id="toc-hands-on-practice-2" class="nav-link" data-scroll-target="#hands-on-practice-2">Hands-on Practice</a></li>
  </ul></li>
  <li><a href="#getting-help" id="toc-getting-help" class="nav-link" data-scroll-target="#getting-help"><span class="header-section-number">1.6</span> Getting help</a>
  <ul class="collapse">
  <li><a href="#hands-on-practice-3" id="toc-hands-on-practice-3" class="nav-link" data-scroll-target="#hands-on-practice-3">Hands-on Practice</a></li>
  </ul></li>
  <li><a href="#data-types-and-structures" id="toc-data-types-and-structures" class="nav-link" data-scroll-target="#data-types-and-structures"><span class="header-section-number">1.7</span> Data types and structures</a>
  <ul class="collapse">
  <li><a href="#basic-data-types" id="toc-basic-data-types" class="nav-link" data-scroll-target="#basic-data-types"><span class="header-section-number">1.7.1</span> Basic data types</a></li>
  <li><a href="#other-important-object-types" id="toc-other-important-object-types" class="nav-link" data-scroll-target="#other-important-object-types"><span class="header-section-number">1.7.2</span> Other important object types</a></li>
  <li><a href="#data-structures" id="toc-data-structures" class="nav-link" data-scroll-target="#data-structures"><span class="header-section-number">1.7.3</span> Data structures</a></li>
  </ul></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors"><span class="header-section-number">1.8</span> Vectors</a>
  <ul class="collapse">
  <li><a href="#direct-creation" id="toc-direct-creation" class="nav-link" data-scroll-target="#direct-creation"><span class="header-section-number">1.8.1</span> Direct creation</a></li>
  <li><a href="#hands-on-practice-4" id="toc-hands-on-practice-4" class="nav-link" data-scroll-target="#hands-on-practice-4"><span class="header-section-number">1.8.2</span> Hands-on Practice</a></li>
  <li><a href="#the-seq-function" id="toc-the-seq-function" class="nav-link" data-scroll-target="#the-seq-function"><span class="header-section-number">1.8.3</span> The <code>seq</code> function</a></li>
  <li><a href="#hands-on-practice-5" id="toc-hands-on-practice-5" class="nav-link" data-scroll-target="#hands-on-practice-5">Hands-on Practice</a></li>
  <li><a href="#the-rep-function" id="toc-the-rep-function" class="nav-link" data-scroll-target="#the-rep-function"><span class="header-section-number">1.8.4</span> The <code>rep</code> function</a></li>
  <li><a href="#hands-on-practice-6" id="toc-hands-on-practice-6" class="nav-link" data-scroll-target="#hands-on-practice-6">Hands-on Practice</a></li>
  <li><a href="#combining-vectors" id="toc-combining-vectors" class="nav-link" data-scroll-target="#combining-vectors"><span class="header-section-number">1.8.5</span> Combining vectors</a></li>
  <li><a href="#hands-on-practice-7" id="toc-hands-on-practice-7" class="nav-link" data-scroll-target="#hands-on-practice-7">Hands-on Practice</a></li>
  <li><a href="#categorical-vectors" id="toc-categorical-vectors" class="nav-link" data-scroll-target="#categorical-vectors"><span class="header-section-number">1.8.6</span> Categorical vectors</a></li>
  <li><a href="#extracting-parts-of-a-vector" id="toc-extracting-parts-of-a-vector" class="nav-link" data-scroll-target="#extracting-parts-of-a-vector"><span class="header-section-number">1.8.7</span> Extracting parts of a vector</a></li>
  <li><a href="#hands-on-practice-12" id="toc-hands-on-practice-12" class="nav-link" data-scroll-target="#hands-on-practice-12">Hands-on Practice</a></li>
  </ul></li>
  <li><a href="#helpful-functions" id="toc-helpful-functions" class="nav-link" data-scroll-target="#helpful-functions"><span class="header-section-number">1.9</span> Helpful functions</a>
  <ul class="collapse">
  <li><a href="#general-functions" id="toc-general-functions" class="nav-link" data-scroll-target="#general-functions"><span class="header-section-number">1.9.1</span> General functions</a></li>
  <li><a href="#hands-on-practice-13" id="toc-hands-on-practice-13" class="nav-link" data-scroll-target="#hands-on-practice-13">Hands-on Practice</a></li>
  <li><a href="#functions-related-to-statistical-distributions" id="toc-functions-related-to-statistical-distributions" class="nav-link" data-scroll-target="#functions-related-to-statistical-distributions"><span class="header-section-number">1.9.2</span> Functions related to statistical distributions</a></li>
  <li><a href="#hands-on-practice-14" id="toc-hands-on-practice-14" class="nav-link" data-scroll-target="#hands-on-practice-14">Hands-on Practice</a></li>
  </ul></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames"><span class="header-section-number">1.10</span> Data Frames</a>
  <ul class="collapse">
  <li><a href="#direct-creation-1" id="toc-direct-creation-1" class="nav-link" data-scroll-target="#direct-creation-1"><span class="header-section-number">1.10.1</span> Direct creation</a></li>
  <li><a href="#importing-data" id="toc-importing-data" class="nav-link" data-scroll-target="#importing-data"><span class="header-section-number">1.10.2</span> Importing Data</a></li>
  <li><a href="#hands-on-practice-15" id="toc-hands-on-practice-15" class="nav-link" data-scroll-target="#hands-on-practice-15">Hands-on Practice</a></li>
  <li><a href="#extracting-parts-of-a-data-frame" id="toc-extracting-parts-of-a-data-frame" class="nav-link" data-scroll-target="#extracting-parts-of-a-data-frame"><span class="header-section-number">1.10.3</span> Extracting parts of a data frame</a></li>
  <li><a href="#modifying-a-data-frame" id="toc-modifying-a-data-frame" class="nav-link" data-scroll-target="#modifying-a-data-frame"><span class="header-section-number">1.10.4</span> Modifying a Data Frame</a></li>
  </ul></li>
  <li><a href="#using-the-pipe-operator" id="toc-using-the-pipe-operator" class="nav-link" data-scroll-target="#using-the-pipe-operator"><span class="header-section-number">1.11</span> Using the pipe operator</a></li>
  <li><a href="#dealing-with-common-problems" id="toc-dealing-with-common-problems" class="nav-link" data-scroll-target="#dealing-with-common-problems"><span class="header-section-number">1.12</span> Dealing with common problems</a>
  <ul class="collapse">
  <li><a href="#error-in-...-could-not-find-function-..." id="toc-error-in-...-could-not-find-function-..." class="nav-link" data-scroll-target="#error-in-...-could-not-find-function-..."><span class="header-section-number">1.12.1</span> <code>Error in ...: could not find function "..."</code></a></li>
  <li><a href="#error-object-...-not-found" id="toc-error-object-...-not-found" class="nav-link" data-scroll-target="#error-object-...-not-found"><span class="header-section-number">1.12.2</span> <code>Error: object '...' not found</code></a></li>
  <li><a href="#error-in-plot.new-figure-margins-too-large" id="toc-error-in-plot.new-figure-margins-too-large" class="nav-link" data-scroll-target="#error-in-plot.new-figure-margins-too-large"><span class="header-section-number">1.12.3</span> <code>Error in plot.new() : figure margins too large</code></a></li>
  <li><a href="#code-was-working-but-isnt-anymore" id="toc-code-was-working-but-isnt-anymore" class="nav-link" data-scroll-target="#code-was-working-but-isnt-anymore"><span class="header-section-number">1.12.4</span> Code was working, but isn’t anymore</a></li>
  </ul></li>
  <li><a href="#ecosystem-debate" id="toc-ecosystem-debate" class="nav-link" data-scroll-target="#ecosystem-debate"><span class="header-section-number">1.13</span> Ecosystem debate</a></li>
  <li><a href="#going-deeper" id="toc-going-deeper" class="nav-link" data-scroll-target="#going-deeper"><span class="header-section-number">1.14</span> Going deeper</a>
  <ul class="collapse">
  <li><a href="#sec-comparing-assgn-op" id="toc-sec-comparing-assgn-op" class="nav-link" data-scroll-target="#sec-comparing-assgn-op"><span class="header-section-number">1.14.1</span> Comparing assignment operators</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-r-foundations" class="quarto-section-identifier"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">R Foundations</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>A condensed, interactive version of this content is available as a Colab notebook, which can be accessed by clicking or scanning the QR code below.</p>
<p><a href="https://colab.research.google.com/github/jfrench/LinearRegression/blob/master/notebooks/01-r-foundations-notebook.ipynb"> <img src="images/qr-01-r-foundations.png"> </a></p>
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png"></a> This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>
<hr>
<p>Meaningful data analysis requires the use of computer software.</p>
<p>R statistical software <span class="citation" data-cites="R-base">(<a href="references.html#ref-R-base" role="doc-biblioref">R Core Team 2024</a>)</span> is one of the most popular tools for data analysis in academia, industry, and government. In what follows, we will learn foundational knowledge and skills that we need to effectively perform data analysis in R. Our discussion will not be exhaustive, and many other important aspects of data analysis using R (like plotting) will be discussed later, as needed.</p>
<section id="setting-up-r-and-rstudio-desktop" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="setting-up-r-and-rstudio-desktop"><span class="header-section-number">1.1</span> Setting up R and RStudio Desktop</h2>
<section id="what-is-r" class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="what-is-r"><span class="header-section-number">1.1.1</span> What is R?</h3>
<p>R is a programming language and environment designed for statistical computing. It was introduced by Robert Gentleman and Robert Ihaka in 1993 as a free implementation of the <em>S</em> programming language developed at Bell Laboratories <a href="https://www.r-project.org/about.html">(https://www.r-project.org/about.html)</a></p>
<p>Some important facts about R are that:</p>
<ul>
<li>R is free, open source, and runs on many different types of computers (Windows, Mac, Linux, and others).</li>
<li>R is an interactive programming language.
<ul>
<li>We can type and run a command in the Console for immediate feedback, in contrast to a compiled programming language, which compiles a program that is then executed.</li>
</ul></li>
<li>R is highly extendable.
<ul>
<li>We can extend the functionality of R beyond what is available by default by installing user-created packages.</li>
<li>We can write our own functions to add additional capabilities to R.</li>
</ul></li>
</ul>
</section>
<section id="installing-r" class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="installing-r"><span class="header-section-number">1.1.2</span> Installing R</h3>
<p>To install R on our personal computer, we will need to download an installer program from the R Project’s website <a href="https://www.r-project.org/">(https://www.r-project.org/)</a>. Links to download the installer program for a specific operating system are found at <a href="https://cloud.r-project.org/" class="uri">https://cloud.r-project.org/</a>.</p>
<p>We should click on the download link appropriate for our computer’s operating system and then go through the process of installing R. A stable link for the most current installer program for the Windows operating system is available at <a href="https://cloud.r-project.org/bin/windows/base/release.html" class="uri">https://cloud.r-project.org/bin/windows/base/release.html</a>. (Similar links are not currently available for Mac and Linux computers.)</p>
</section>
<section id="installing-rstudio" class="level3" data-number="1.1.3">
<h3 data-number="1.1.3" class="anchored" data-anchor-id="installing-rstudio"><span class="header-section-number">1.1.3</span> Installing RStudio</h3>
<p>RStudio Desktop is a free “front end” for R provided by Posit Software (<a href="https://posit.co/" class="uri">https://posit.co/</a>). RStudio Desktop makes doing data analysis with R much easier by adding an Integrated Development Environment (IDE) and providing many other features. Currently, we can download RStudio at <a href="https://posit.co/download/rstudio-desktop/" class="uri">https://posit.co/download/rstudio-desktop/</a>. We should download the Free version of RStudio Desktop appropriate for our computer and install it.</p>
<p>Having installed both R and RStudio Desktop, we will want to open RStudio Desktop as we continue to learn about R.</p>
</section>
<section id="rstudio-layout" class="level3" data-number="1.1.4">
<h3 data-number="1.1.4" class="anchored" data-anchor-id="rstudio-layout"><span class="header-section-number">1.1.4</span> RStudio Layout</h3>
<p>RStudio Desktop has four panes:</p>
<ol type="1">
<li>Console: the pane where commands are run.</li>
<li>Source: the pane where we prepare commands to run.</li>
<li>Environment/History: the pane where we can see all the objects in our workspace, our command history, and other information.</li>
<li>Files/Plot/Packages/Help: the pane where we navigate between directories, view plots, see the packages available to be loaded, or get help.</li>
</ol>
<p>To see all RStudio panes, press the keys <code>Ctrl + Alt + Shift + 0</code> on a PC or <code>Cmd + Option + Shift + 0</code> on a Mac.</p>
<p><a href="#fig-rstudiopanes" class="quarto-xref">Figure&nbsp;<span>1.1</span></a> displays a labeled graphic of the panes. The position of the panes can change depending on how we set the display preferences, but the look of each pane will be similar.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-rstudiopanes" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rstudiopanes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/rstudio_panes_new.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rstudiopanes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.1: The RStudio panes labeled for convenience.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="customizing-the-rstudio-workspace" class="level3" data-number="1.1.5">
<h3 data-number="1.1.5" class="anchored" data-anchor-id="customizing-the-rstudio-workspace"><span class="header-section-number">1.1.5</span> Customizing the RStudio workspace</h3>
<p>At this point, we should customize our workspace to prevent us from experiencing future frustration. R provides a “feature” that allows us to “save a workspace”. This allows us to easily pick up our analysis where we last left off. Unfortunately, over time, we will accumulate many environmental artifacts that can conflict with each other. This can lead to errors and incorrect results that we will need to deal with. Additionally, this “feature” hinders the ability of others to reproduce our analysis because other users will not have the same workspace.</p>
<p>To turn off this feature, in the RStudio menu bar, we click Tools → Global Options and then make sure the “General” option is selected. Then we make the following changes (if necessary):</p>
<ol type="1">
<li>Uncheck the box for “Restore .RData into workspace at startup”.</li>
<li>Change the toggle box for “Save workspace to .RData on exit” to “Never”.</li>
<li>Click “Apply” then “OK” to save the changes.</li>
</ol>
<p><a href="#fig-generaloptions" class="quarto-xref">Figure&nbsp;<span>1.2</span></a> displays what these options should look like.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-generaloptions" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-generaloptions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/general_options.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-generaloptions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.2: The General options window.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="running-code-scripts-and-comments" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="running-code-scripts-and-comments"><span class="header-section-number">1.2</span> Running code, scripts, and comments</h2>
<p>We can run code in R by typing it in the Console next to the <code>&gt;</code> symbol and pressing the Enter key.</p>
<p>If we need to successively run multiple commands, it’s better to write our commands in a “script” file and then save the file. The commands in a Script file are often generically referred to as “code”.</p>
<p>Script files make it easy to:</p>
<ul>
<li>Reproduce our data analysis without retyping all our commands.</li>
<li>Share our code with others.</li>
</ul>
<p>A new Script file can be obtained by:</p>
<ul>
<li>Clicking File → New File → R Script in the RStudio menu bar.</li>
<li>Pressing <code>Ctrl + Shift + n</code> on a PC or <code>Cmd + Shift + n</code> on a Mac.</li>
</ul>
<p>There are various ways to run code from a Script file. The most common ones are:</p>
<ol type="1">
<li>Highlight the code we want to run and click the “Run” button at the top of the Script pane. <a href="#fig-run-button" class="quarto-xref">Figure&nbsp;<span>1.3</span></a> displays the Run button.</li>
<li>Highlight the code we want to run and press <code>Ctrl + Enter</code> on our keyboard. If we don’t highlight anything, by default, RStudio runs the command the cursor currently lies on.</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div id="fig-run-button" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-run-button-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/run_button.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-run-button-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.3: The Run icon can be clicked to run a selection of commands.
</figcaption>
</figure>
</div>
</div>
</div>
<p>To save a Script file:</p>
<ul>
<li>Click File → Save in the RStudio menu bar.</li>
<li>Press <code>Ctrl + s</code> on a PC or <code>Cmd + s</code> on a Mac.</li>
</ul>
<p>A comment is a set of text ignored by R when submitted to the Console. The <code>#</code> symbol indicates the start of a comment. Nothing to the right of the <code>#</code> is executed by the Console. We can comment (or uncomment) multiple lines of code in the Source pane of RStudio by highlighting the code we want to comment and pressing <code>Ctrl + Shift + c</code> on a PC or <code>Cmd + Shift + c</code> on a Mac.</p>
<hr>
<section id="hands-on-practice" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice">Hands-on Practice</h3>
<p>Perform the following tasks:</p>
<ol type="1">
<li>Type <code>1+1</code> in the Console and press the Enter key.</li>
<li>Open a new Script in RStudio.</li>
<li>Type <code>mean(1:3)</code> in the Script file.</li>
<li>Type <code># mean(1:3)</code> in the Script file.</li>
<li>Run the commands from the Script using an approach mentioned above.</li>
<li>Save the Script file.</li>
<li>Use the keyboard shortcut to “comment out” some of the lines of the Script file.</li>
</ol>
<hr>
</section>
</section>
<section id="sec-assignment" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="sec-assignment"><span class="header-section-number">1.3</span> Assignment</h2>
<p>R works on various types of objects that we’ll learn more about later.</p>
<p>To store an object in the computer’s memory, we must assign it a name using the assignment operator (<code>&lt;-</code>) or the equal sign (<code>=</code>).</p>
<p>Some comments:</p>
<ul>
<li>In general, both <code>&lt;-</code> and <code>=</code> can be used for assignment.</li>
<li>Pressing <code>Alt + -</code> on a PC or <code>Option + -</code> on a Mac will insert <code>&lt;-</code> into the R Console and Script files.
<ul>
<li>If we are creating an R Markdown (rmd) or Quarto Markdown (qmd) file, then this shortcut will only insert <code>&lt;-</code> if we are in an R code block.</li>
</ul></li>
<li><code>&lt;-</code> and <code>=</code> are NOT synonyms, but can be used identically most of the time.</li>
</ul>
<p><strong>It is best to use <code>&lt;-</code> for assigning a name to an object and reserving <code>=</code> for specifying function arguments.</strong> See Section <a href="#sec-comparing-assgn-op" class="quarto-xref"><span>Section 1.14.1</span></a> for a deeper explanation.</p>
<p>Once an object has been assigned a name, it can be printed by running the name of the object in the Console or using the <code>print</code> function.</p>
<hr>
<section id="hands-on-practice-1" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice-1">Hands-on Practice</h3>
<p>Run the following commands in the Console:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">mean</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the code above, we compute the sample mean of the values <span class="math inline">\(1, 2, \ldots, 10\)</span>, then assign it the name <code>m</code>. However, nothing is printed by the R Console.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>m</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>When we type the name of an object in the R Console and run the command, R will print at least some of the information in the object. In this case, the value stored in <code>m</code>, the value <code>5.5</code>, will be returned.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(m)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The command above is a formal way of printing an object in R and can be especially useful when an object has a defined <code>print</code> method with additional arguments. We will discuss this later when it is relevant.</p>
<hr>
</section>
</section>
<section id="functions" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="functions"><span class="header-section-number">1.4</span> Functions</h2>
<p>A function is an object that performs a certain action or set of actions based on the objects it receives from its arguments. We use a sequence of function calls to perform data analysis.</p>
<p>We use a function by typing the function’s name in the Console (or Script), supplying the function’s arguments between parentheses, <code>()</code>, and then pressing the Enter key.</p>
<p>The arguments of a function are pieces of data or information that the function needs to perform the requested task (i.e., the function “inputs”). Each argument we supply is separated by a comma, <code>,</code>. Some functions have default values for certain arguments and do not need to specified unless something besides the default behavior is desired.</p>
<p>The <code>mean</code> function computes the sample mean of an R object <code>x</code>. (We can look at the documentation for the function by running <code>?mean</code> in the Console. We’ll talk more about getting help with R shortly.) The <code>mean</code> function also has a <code>trim</code> argument that indicates the, “… fraction … of observations to be trimmed from each end of <code>x</code> before the mean is computed” <span class="citation" data-cites="R-base">(<a href="references.html#ref-R-base" role="doc-biblioref">R Core Team 2024</a>, <code>?mean</code>)</span>.</p>
<p>Consider the command below, in which we compute the mean of the set of values <code>1, 5, 3, 2, 10</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.6</code></pre>
</div>
</div>
<p>In the next command, we compute a trimmed mean of the numeric vector. Since the <code>trim</code> argument is <code>0.2</code>, we “trim” the smallest 20% of values and the largest 20% of values from the numeric vector prior to computing the mean.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">10</span>), <span class="at">trim =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
<p>In the first function call, we compute <code>(1 + 5 + 3 + 4 + 10)/5 = 23/5 = 4.6</code>. In the second function call, we remove the smallest 20% and largest 20% of the values (i.e., dropping <code>1</code> and <code>10</code>) and compute <code>(5 + 3 + 4)/3 = 12/3 = 4</code>.</p>
</section>
<section id="packages" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="packages"><span class="header-section-number">1.5</span> Packages</h2>
<p>Packages are collections of functions, data, and other objects that extend the functionality available in R by default.</p>
<p>R packages can be installed using the <code>install.packages</code> function and loaded using the <code>library</code> function.</p>
<hr>
<section id="hands-on-practice-2" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice-2">Hands-on Practice</h3>
<p>The <strong>tidyverse</strong> <span class="citation" data-cites="R-tidyverse">(<a href="references.html#ref-R-tidyverse" role="doc-biblioref">Wickham 2023c</a>)</span> is a popular ecosystem of R packages used for manipulating, tidying, and plotting data. Currently, the <strong>tidyverse</strong> is comprised of the following packages:</p>
<ul>
<li><strong>ggplot2</strong>: A package for plotting based on the “Grammar of Graphics” <span class="citation" data-cites="R-ggplot2">(<a href="references.html#ref-R-ggplot2" role="doc-biblioref">Wickham et al. 2024</a>)</span>.</li>
<li><strong>purrr</strong>: A package for functional programming <span class="citation" data-cites="R-purrr">(<a href="references.html#ref-R-purrr" role="doc-biblioref">Wickham and Henry 2023</a>)</span>.</li>
<li><strong>tibble</strong>: A package providing a more advanced data frame <span class="citation" data-cites="R-tibble">(<a href="references.html#ref-R-tibble" role="doc-biblioref">Müller and Wickham 2023</a>)</span>.</li>
<li><strong>dplyr</strong>: A package for manipulating data <span class="citation" data-cites="R-dplyr">(<a href="references.html#ref-R-dplyr" role="doc-biblioref">Wickham et al. 2023</a>)</span>. More specifically, it provides ” a grammar of data manipulation”.</li>
<li><strong>tidyr</strong>: A package to help create “tidy” data <span class="citation" data-cites="R-tidyr">(<a href="references.html#ref-R-tidyr" role="doc-biblioref">Wickham, Vaughan, and Girlich 2024</a>)</span>. Tidy data is a data organization style often convenient for data analysis.</li>
<li><strong>stringr</strong>: A package for working with character/string data <span class="citation" data-cites="R-stringr">(<a href="references.html#ref-R-stringr" role="doc-biblioref">Wickham 2023b</a>)</span>.</li>
<li><strong>readr</strong>: A package for importing data <span class="citation" data-cites="R-readr">(<a href="references.html#ref-R-readr" role="doc-biblioref">Wickham, Hester, and Bryan 2024</a>)</span>.</li>
<li><strong>forcats</strong>: A package for working with categorical data <span class="citation" data-cites="R-forcats">(<a href="references.html#ref-R-forcats" role="doc-biblioref">Wickham 2023a</a>)</span>.</li>
</ul>
<p>Install the set of <strong>tidyverse</strong> R packages by running the command below in the Console.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After we install the <strong>tidyverse</strong>, we load the collection of packages by running the command below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We should see something like the output below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<p>When we loaded the <strong>tidyverse</strong> package above, notice that <code>dplyr::lag()</code> masks <code>stats::lag()</code>. “Masking” means that functions or objects from different packages have the same name. In this case, both the <strong>dplyr</strong> and <strong>stats</strong> packages have a function called <code>lag</code>. Different packages may use the same function name to provide certain functionality. The functions will likely be used for different tasks or require different arguments.</p>
<p>To refer to a function in a specific package, we should add the syntax <code>package::</code> prior to the function name. In the code below, we run <code>stats::lag</code> and <code>dplyr::lag</code> on two different objects using the <code>::</code> syntax.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run stats::lag on a numeric vector</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>stats<span class="sc">::</span><span class="fu">lag</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10
attr(,"tsp")
[1] -1  8  1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># run dplyr::lag on a numeric vector</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">lag</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] NA NA  1  2  3  4  5  6  7  8</code></pre>
</div>
</div>
<p>The output returned by the two functions is different because the functions are intended to do different things. The <code>stats::lag</code> function call shifts the time base of the provided time series object back 2 units, while the call to <code>dplyr::lag</code> provides the values 2 positions earlier in the object.</p>
<p>Note: this example is not intended to help us understand the <code>lag</code> function. This example highlights how to use the <code>::</code> syntax to call a function in a specific package when the function name is used in multiple packages.</p>
<hr>
</section>
</section>
<section id="getting-help" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="getting-help"><span class="header-section-number">1.6</span> Getting help</h2>
<p>There are many ways to get help in R.</p>
<p>If we know the command for which we want help, then we run <code>?command</code> in the Console to access the documentation for the object (where <code>command</code> is replaced by the name of the relevant command). This approach will also work with data sets, package names, object classes, etc. If we need to refer to a function in a specific package, we can use <code>?package::function</code> to get help on a specific function, e.g., <code>?dplyr::filter</code>.</p>
<p>The documentation will provide:</p>
<ul>
<li>A <strong>Description</strong> section with general information about the function or object.</li>
<li>A <strong>Usage</strong> section with a generic template for using the function or object.</li>
<li>An <strong>Arguments</strong> section summarizing the inputs the function needs.</li>
<li>A <strong>Details</strong> section may be provided with additional information about the function or object.</li>
<li>A <strong>Value</strong> section that describes what is returned by the function.</li>
<li>An <strong>Examples</strong> section providing examples of how to use the function. Usually, these can be copied and pasted into the Console to better understand the function arguments and what it produces.</li>
</ul>
<p>If we need to find a command related to a certain <em>topic</em>, then <code>??topic</code> will search for the topic through all installed documentation and bring up any vignettes, code demonstrations, or help pages that include the topic for which we searched.</p>
<p>If we are trying to figure out why an error is being produced, what packages can be used to perform a certain analysis, how to perform a complex task that we can’t seem to figure out, etc., then we can simply do a web search for what we’re trying to figure out! Because R is such a popular programming language, it is likely we will find a <a href="https://www.stackoverflow.com">stackoverflow</a> response, a helpful blog post, an R users forum response, etc., that addresses our question.</p>
<p>Lastly, we can query artificial intelligence chatbots with questions about how to use R to perform a certain analysis or how to fix bugs in our code.</p>
<hr>
<section id="hands-on-practice-3" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice-3">Hands-on Practice</h3>
<p>Do the following:</p>
<ol type="1">
<li>Run<code>?lm</code> in the Console to get help on the <code>lm</code> function, which is one of the main functions used for fitting linear models.</li>
<li>Run <code>??logarithms</code> in the Console to search the R documentation for information about logarithms. It is likely that we will see multiple help pages that mention “logarithm”, so we may end up needing to find the desired entry via trial and error.</li>
<li>Run a web search for something along the lines of “How do I change the size of the axis labels in an R plot?”.</li>
<li>Query an artificial intelligence chatbot regarding how to create a scatter plot using base R. Were the results useful and correct?</li>
</ol>
<hr>
</section>
</section>
<section id="data-types-and-structures" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="data-types-and-structures"><span class="header-section-number">1.7</span> Data types and structures</h2>
<section id="basic-data-types" class="level3" data-number="1.7.1">
<h3 data-number="1.7.1" class="anchored" data-anchor-id="basic-data-types"><span class="header-section-number">1.7.1</span> Basic data types</h3>
<p>R has 6 basic (“atomic”) vector types <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Basic-types">(https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Basic-types)</a> <span class="citation" data-cites="R-base">(<a href="references.html#ref-R-base" role="doc-biblioref">R Core Team 2024</a>)</span>:</p>
<ol type="1">
<li><code>character</code>: collections of characters. E.g., <code>"a"</code>, <code>"hello world!"</code>.</li>
<li><code>double</code>: decimal numbers. e.g., <code>1.2</code>, <code>1.0</code>.</li>
<li><code>integer</code>: positive and negative whole numbers. In R, we must add <code>L</code> to the end of a number to specify it as an integer. E.g., <code>1L</code> is an integer but <code>1</code> is a double.</li>
<li><code>logical</code>: Boolean values, <code>TRUE</code> and <code>FALSE</code>.</li>
<li><code>complex</code>: complex numbers. E.g., <code>1+3i</code>.</li>
<li><code>raw</code>: a type to hold raw bytes.</li>
</ol>
<p>Both <code>double</code> and <code>integer</code> values are specific types of <code>numeric</code> values.</p>
<p>The <code>typeof</code> function returns the R internal type or storage mode of any object.</p>
<p>Consider the output of the commands below. How does the output differ?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="dv">1</span>L)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(<span class="st">"hello world!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
</section>
<section id="other-important-object-types" class="level3" data-number="1.7.2">
<h3 data-number="1.7.2" class="anchored" data-anchor-id="other-important-object-types"><span class="header-section-number">1.7.2</span> Other important object types</h3>
<p>There are other important types of objects in R that are not basic. We will discuss a few. The R Project manual provides additional information about available types <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Basic-types">(https://cran.r-project.org/doc/manuals/r-release/R-lang.html#Basic-types)</a>.</p>
<section id="numeric" class="level4" data-number="1.7.2.1">
<h4 data-number="1.7.2.1" class="anchored" data-anchor-id="numeric"><span class="header-section-number">1.7.2.1</span> Numeric</h4>
<p>An object is <code>numeric</code> if it is of type <code>integer</code> or <code>double</code>. In that case, it’s <code>mode</code> is said to be <code>numeric</code>.</p>
<p>The <code>is.numeric</code> function tests whether an object can be interpreted as a set of numbers. In the code below, we use the <code>is.numeric</code> function to query whether certain objects are <code>numeric</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="st">"1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(<span class="dv">1</span>L)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="null" class="level4" data-number="1.7.2.2">
<h4 data-number="1.7.2.2" class="anchored" data-anchor-id="null"><span class="header-section-number">1.7.2.2</span> NULL</h4>
<p><code>NULL</code> is a special object to indicate an object is absent. An object having a length of zero is not the same thing as an object being absent.</p>
</section>
<section id="na" class="level4" data-number="1.7.2.3">
<h4 data-number="1.7.2.3" class="anchored" data-anchor-id="na"><span class="header-section-number">1.7.2.3</span> NA</h4>
<p>A “missing value” occurs when the value of an object isn’t known. R uses the special object <code>NA</code> to represent a missing value.</p>
<p>If we have a missing value, we should represent that value as <code>NA</code>. <code>"NA"</code> is not the same object as <code>NA</code>.</p>
</section>
<section id="functions-1" class="level4" data-number="1.7.2.4">
<h4 data-number="1.7.2.4" class="anchored" data-anchor-id="functions-1"><span class="header-section-number">1.7.2.4</span> Functions</h4>
<p>From R’s perspective, a function is simply another data type.</p>
</section>
<section id="a-comment-about-classes" class="level4" data-number="1.7.2.5">
<h4 data-number="1.7.2.5" class="anchored" data-anchor-id="a-comment-about-classes"><span class="header-section-number">1.7.2.5</span> A comment about classes</h4>
<p>Every R object has a <code>class</code> that may be distinct from its type. Many functions will operate differently depending on an object’s <code>class</code>.</p>
</section>
</section>
<section id="data-structures" class="level3" data-number="1.7.3">
<h3 data-number="1.7.3" class="anchored" data-anchor-id="data-structures"><span class="header-section-number">1.7.3</span> Data structures</h3>
<p>R operates on data structures. A data structure is a “container” that holds certain kinds of information.</p>
<p>R has 5 basic data structures:</p>
<ol type="1">
<li>vector.</li>
<li>matrix.</li>
<li>array.</li>
<li>data frame.</li>
<li>list.</li>
</ol>
<p>Vectors, matrices, and arrays are homogeneous objects that can only store a single data type at a time. Data frames and lists can store multiple data types.</p>
<p>Vectors and lists are considered one-dimensional objects. A list is technically a vector. Vectors of a single type are atomic vectors <a href="https://cran.r-project.org/doc/manuals/r-release/R-lang.html#List-objects">(https://cran.r-project.org/doc/manuals/r-release/R-lang.html#List-objects)</a>. Matrices and data frames are considered two-dimensional objects. Arrays can have one or more dimensions.</p>
<p><a href="#tbl-datastructures1" class="quarto-xref">Table&nbsp;<span>1.1</span></a> summarizes the relationship between dimensionality and data type for the basic data structures. It is based on a <a href="http://adv-r.had.co.nz/Data-structures.html">table</a> in the first edition of Hadley Wickham’s <em>Advanced R</em> <span class="citation" data-cites="advancedr">(<a href="references.html#ref-advancedr" role="doc-biblioref">Wickham 2019</a>)</span>.</p>
<div class="cell">
<div id="tbl-datastructures1" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-datastructures1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1.1: A table summarizing the relationship between dimensionality and data type homogeneity for the 5 basic data structures.
</figcaption>
<div aria-describedby="tbl-datastructures1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">number of dimensions</th>
<th style="text-align: left;">homogeneous data type</th>
<th style="text-align: left;">heterogeneous data types</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">atomic vector</td>
<td style="text-align: left;">list</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">matrix</td>
<td style="text-align: left;">data frame</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1 or more</td>
<td style="text-align: left;">array</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
</section>
<section id="vectors" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="vectors"><span class="header-section-number">1.8</span> Vectors</h2>
<p>A <em>vector</em> is a one-dimensional set of data of the same type.</p>
<section id="direct-creation" class="level3" data-number="1.8.1">
<h3 data-number="1.8.1" class="anchored" data-anchor-id="direct-creation"><span class="header-section-number">1.8.1</span> Direct creation</h3>
<p>The most basic way to create a vector is the <code>c</code> (combine) function. The <code>c</code> function combines values into an atomic vector or list.</p>
<p>The following commands create vectors of type <code>numeric</code>, <code>character</code>, and <code>logical</code>, respectively.</p>
<ul>
<li><code>c(1, 2, 5.3, 6, -2, 4)</code></li>
<li><code>c("one", "two", "three")</code></li>
<li><code>c(TRUE, TRUE, FALSE, TRUE)</code></li>
</ul>
<hr>
</section>
<section id="hands-on-practice-4" class="level3" data-number="1.8.2">
<h3 data-number="1.8.2" class="anchored" data-anchor-id="hands-on-practice-4"><span class="header-section-number">1.8.2</span> Hands-on Practice</h3>
<p>Run the commands below in the Console.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="fl">5.3</span>, <span class="dv">6</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>R provides two main functions for creating vectors with specific patterns: <code>seq</code> and <code>rep</code>.</p>
</section>
<section id="the-seq-function" class="level3" data-number="1.8.3">
<h3 data-number="1.8.3" class="anchored" data-anchor-id="the-seq-function"><span class="header-section-number">1.8.3</span> The <code>seq</code> function</h3>
<p>The <code>seq</code> (sequence) function is used to create an equidistant series of numeric values. We provide some examples of using the <code>seq</code> function below:</p>
<ul>
<li><code>seq(1, 10)</code> creates a sequence of numbers from 1 to 10 in increments of 1.</li>
<li><code>1:10</code> creates a sequence of numbers from 1 to 10 in increments of 1.</li>
<li><code>seq(1, 20, by = 2)</code> creates a sequence of numbers from 1 to 20 in increments of 2.</li>
<li><code>seq(10, 20, len = 10)</code> creates a sequence of numbers from 10 to 20 of length 10.</li>
</ul>
<hr>
</section>
<section id="hands-on-practice-5" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice-5">Hands-on Practice</h3>
<p>Run the commands below in the Console and try to answer the questions below.</p>
<ol type="1">
<li>What does the <code>by</code> argument of the <code>seq</code> function control?</li>
<li>What does the <code>len</code> argument of the <code>seq</code> function control?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">20</span>, <span class="at">by =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="at">len =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="the-rep-function" class="level3" data-number="1.8.4">
<h3 data-number="1.8.4" class="anchored" data-anchor-id="the-rep-function"><span class="header-section-number">1.8.4</span> The <code>rep</code> function</h3>
<p>The <code>rep</code> (replicate) function can be used to create a vector by replicating values. We provide some examples of using the <code>rep</code> function below:</p>
<ul>
<li><code>rep(1:3, times = 3)</code> replicates the sequence <code>1, 2, 3</code> three times in a row.</li>
<li><code>rep(c("trt1", "trt2", "trt3"), times = 1:3)</code> replicates <code>"trt1"</code> once, <code>"trt2"</code> twice, and <code>"trt3"</code> three times.</li>
<li><code>rep(1:3, each = 3)</code> replicates each element of the sequence 1, 2, 3 three times.</li>
</ul>
<hr>
</section>
<section id="hands-on-practice-6" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice-6">Hands-on Practice</h3>
<p>Run the commands below in the Console and try to answer the questions below.</p>
<ol type="1">
<li>What does the <code>times</code> argument of the <code>rep</code> function control?</li>
<li>What does the <code>each</code> argument of the <code>rep</code> function control?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">times =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"trt1"</span>, <span class="st">"trt2"</span>, <span class="st">"trt3"</span>), <span class="at">times =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="combining-vectors" class="level3" data-number="1.8.5">
<h3 data-number="1.8.5" class="anchored" data-anchor-id="combining-vectors"><span class="header-section-number">1.8.5</span> Combining vectors</h3>
<p>Multiple vectors of the same type can be combined into a new vector object using the <code>c</code> function. E.g., <code>c(v1, v2, v3)</code> will combine vectors <code>v1</code>, <code>v2</code>, and <code>v3</code>.</p>
<hr>
</section>
<section id="hands-on-practice-7" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice-7">Hands-on Practice</h3>
<p>Run the commands below in the Console. Determine what action each command performs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dv">11</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">each =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>new <span class="ot">&lt;-</span> <span class="fu">c</span>(v1, v2, v3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>new</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="categorical-vectors" class="level3" data-number="1.8.6">
<h3 data-number="1.8.6" class="anchored" data-anchor-id="categorical-vectors"><span class="header-section-number">1.8.6</span> Categorical vectors</h3>
<p>Categorical data should be stored as a <code>factor</code> in R. Sometimes, we might naively store categorical data as <code>character</code> or <code>numeric</code> objects for simplicity. In that situation, our code might still work because a cautious developer planned for our laziness, but it is best to use good coding practices that minimize potential issues. For that reason, represent categorical data as a <code>factor</code>.</p>
<section id="creating-a-factor-object" class="level4" data-number="1.8.6.1">
<h4 data-number="1.8.6.1" class="anchored" data-anchor-id="creating-a-factor-object"><span class="header-section-number">1.8.6.1</span> Creating a <code>factor</code> object</h4>
<p>The <code>factor</code> function takes a vector of values that can be coerced to type <code>character</code> and converts them to an object of class <code>factor</code>. In the code chunks below, we create two <code>factor</code> objects from vectors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">times =</span> <span class="dv">3</span>))</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>f1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 3 4 5 6 1 2 3 4 5 6 1 2 3 4 5 6
Levels: 1 2 3 4 5 6</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>f2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"a"</span>, <span class="dv">7</span>, <span class="st">"blue"</span>, <span class="st">"blue"</span>, <span class="cn">FALSE</span>))</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>f2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] a     7     blue  blue  FALSE
Levels: 7 a blue FALSE</code></pre>
</div>
</div>
<p>A printed <code>factor</code> object lists the <code>Levels</code> (i.e., unique categories) of the object.</p>
<p>The <code>is.factor</code> function can be used to determine whether an object is a <code>factor</code>.</p>
<p><code>factor</code> objects aren’t technically vectors (e.g., running <code>is.factor(f2)</code> based on the above code will return <code>FALSE</code>) though they essentially behave like vectors, which is why discuss them here.</p>
<hr>
</section>
<section id="hands-on-practice-8" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="hands-on-practice-8">Hands-on Practice</h4>
<p>Complete the following tasks:</p>
<ol type="1">
<li>Create a vector named <code>grp</code> that has two levels: <code>a</code> and <code>b</code>, where the first 7 values are <code>a</code> and the second 4 values are <code>b</code>.</li>
<li>Run <code>is.factor(grp)</code> in the Console.</li>
<li>Run <code>is.vector(grp)</code> in the Console.</li>
<li>Run <code>typeof(grp)</code> in the Console.</li>
</ol>
<p>Related to the last task, a <code>factor</code> object is <em>technically</em> a collection of integers that have labels associated with each unique integer value.</p>
<hr>
</section>
<section id="creating-an-ordered-factor-object" class="level4" data-number="1.8.6.2">
<h4 data-number="1.8.6.2" class="anchored" data-anchor-id="creating-an-ordered-factor-object"><span class="header-section-number">1.8.6.2</span> Creating an ordered <code>factor</code> object</h4>
<p>Categorical data sometimes has a natural ordering that we want to acknowledge in our analysis. E.g., we may have categorical data with the levels <code>small</code>, <code>medium</code>, and <code>large</code>. The levels have a natural ordering (either smallest to largest or vice versa, depending on the context).</p>
<p>Suppose we create the <code>size</code> vector with <code>character</code> values <code>"small"</code>, <code>"medium"</code>, and <code>"large"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"small"</span>, <span class="st">"medium"</span>, <span class="st">"small"</span>, <span class="st">"large"</span>, <span class="st">"medium"</span>, <span class="st">"medium"</span>, <span class="st">"large"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If we convert <code>size</code> to a <code>factor</code> object, R will automatically order the levels of <code>size</code> alphabetically, as seen from the code chunk below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] small  medium small  large  medium medium large 
Levels: large medium small</code></pre>
</div>
</div>
<p>This is not technically a problem, but can result in undesirable side effects such as plots with levels in an undesirable order.</p>
<p>To create an ordered <code>factor</code> object, we specify the desired order of the levels using the <code>levels</code> argument and set the <code>ordered</code> argument to <code>TRUE</code>, as in the code below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factor</span>(size, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"small"</span>, <span class="st">"medium"</span>, <span class="st">"large"</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] small  medium small  large  medium medium large 
Levels: small &lt; medium &lt; large</code></pre>
</div>
</div>
</section>
</section>
<section id="extracting-parts-of-a-vector" class="level3" data-number="1.8.7">
<h3 data-number="1.8.7" class="anchored" data-anchor-id="extracting-parts-of-a-vector"><span class="header-section-number">1.8.7</span> Extracting parts of a vector</h3>
<p>Parts a vector can be extracted by appending an index vector in square brackets <code>[]</code> to the name of the vector, where the index vector indicates which parts of the vector to retain or exclude. We can include either numbers or logical values in our index vector. We discuss both approaches below.</p>
<section id="selection-using-a-numeric-index-vector" class="level4" data-number="1.8.7.1">
<h4 data-number="1.8.7.1" class="anchored" data-anchor-id="selection-using-a-numeric-index-vector"><span class="header-section-number">1.8.7.1</span> Selection using a numeric index vector</h4>
<p>Let’s create a <code>numeric</code> vector <code>a</code> with the values 2, 4, 6, 8, 10, 12, 14, 16.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">2</span>, <span class="dv">16</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  4  6  8 10 12 14 16</code></pre>
</div>
</div>
<p>To extract the 2nd, 4th, and 6th elements of <code>a</code>, we can use the code below. The code indicates that the 2nd, 4th, and 6th elements of <code>a</code> should be extracted.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>a[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  4  8 12</code></pre>
</div>
</div>
<p>We can also use “negative” indexing to indicate the elements of the vector we want to exclude. Specifically, supplying a negative index vector indicates the values we want to exclude from our selection.</p>
<p>In the example below, we use the minus (<code>-</code>) sign in front of the index vector <code>c(2, 4, 6)</code> to indicate we want all elements of <code>a</code> EXCEPT the 2nd, 4th, and 6th.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>a[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  6 10 14 16</code></pre>
</div>
</div>
<p>Running the code chunk below excludes the 3rd through 6th elements of <code>a</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>a[<span class="sc">-</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">6</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  4 14 16</code></pre>
</div>
</div>
</section>
<section id="logical-expressions" class="level4" data-number="1.8.7.2">
<h4 data-number="1.8.7.2" class="anchored" data-anchor-id="logical-expressions"><span class="header-section-number">1.8.7.2</span> Logical expressions</h4>
<p>A logical expression uses one or more logical operators to determine which elements of an object satisfy the specified statement. The basic logical operators are:</p>
<ul>
<li><code>&lt;</code>, <code>&lt;=</code>: less than, less than or equal to.</li>
<li><code>&gt;</code>, <code>&gt;=</code>: greater than, greater than or equal to.</li>
<li><code>==</code>: equal to.</li>
<li><code>!=</code>: not equal to.</li>
</ul>
<p>Creating a logical expression with a vector will result in a logical vector indicating whether each element satisfies the logical expression.</p>
<hr>
</section>
<section id="hands-on-practice-9" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="hands-on-practice-9">Hands-on Practice</h4>
<p>Run the following commands in R and see what is printed. What task is each statement performing?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">&gt;</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">&lt;=</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">==</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>a <span class="sc">!=</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="the-and-or-and-not-operators" class="level4" data-number="1.8.7.3">
<h4 data-number="1.8.7.3" class="anchored" data-anchor-id="the-and-or-and-not-operators"><span class="header-section-number">1.8.7.3</span> The “and”, “or”, and “not” operators</h4>
<p>We can create more complicated logical expressions using the “and”, “or”, and “not” operators.</p>
<ul>
<li><code>&amp;</code>: and.</li>
<li><code>|</code>: or.</li>
<li><code>!</code>: not, i.e., not true.</li>
</ul>
<p>The <code>&amp;</code> operator returns <code>TRUE</code> if all logical values connected by the <code>&amp;</code> are <code>TRUE</code>, otherwise it returns <code>FALSE</code>.</p>
<p>The <code>|</code> operator returns <code>TRUE</code> if any logical values connected by the <code>|</code> are <code>TRUE</code>, otherwise it returns <code>FALSE</code>.</p>
<p>The <code>!</code> operator returns the complement of a logical value or expression.</p>
<hr>
</section>
<section id="hands-on-practice-10" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="hands-on-practice-10">Hands-on Practice</h4>
<p>Run the following commands below in the Console.</p>
<ol type="1">
<li>What role does <code>&amp;</code> serve in a sequence of logical values?</li>
<li>What role does <code>|</code> serve in a sequence of logical values?</li>
<li>What role does <code>!</code> serve in a sequence of logical values?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">TRUE</span> <span class="sc">&amp;</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">TRUE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">FALSE</span> <span class="sc">|</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="connecting-logical-expressions" class="level4" data-number="1.8.7.4">
<h4 data-number="1.8.7.4" class="anchored" data-anchor-id="connecting-logical-expressions"><span class="header-section-number">1.8.7.4</span> Connecting logical expressions</h4>
<p>Logical expressions can be connected via <code>&amp;</code> and <code>|</code> (and impacted via <code>!</code>), in which case the operators are applied elementwise (i.e., to all of the first elements in the expressions, then all the second elements in the expressions, etc).</p>
<hr>
</section>
<section id="hands-on-practice-11" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="hands-on-practice-11">Hands-on Practice</h4>
<p>Run the following commands in R and see what is printed. What task is each statement performing?</p>
<p>Note that the parentheses <code>()</code> are used to group logical expressions to more easily understand what is being done. This is a good coding style to follow.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>(a <span class="sc">&gt;</span> <span class="dv">6</span>) <span class="sc">&amp;</span> (a <span class="sc">&lt;=</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>(a <span class="sc">&lt;=</span> <span class="dv">4</span>) <span class="sc">|</span> (a <span class="sc">&gt;=</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span>((a <span class="sc">&lt;=</span> <span class="dv">4</span>) <span class="sc">|</span> (a <span class="sc">&gt;=</span> <span class="dv">12</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="selection-using-logical-expressions" class="level4" data-number="1.8.7.5">
<h4 data-number="1.8.7.5" class="anchored" data-anchor-id="selection-using-logical-expressions"><span class="header-section-number">1.8.7.5</span> Selection using logical expressions</h4>
<p>Logical expressions can be used to return parts of an object satisfying the appropriate criteria. Specifically, we pass logical expressions within the square brackets to access part of a data structure. This syntax will return each element of the object for which the expression is <code>TRUE</code>.</p>
<hr>
</section>
</section>
<section id="hands-on-practice-12" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice-12">Hands-on Practice</h3>
<p>Run the following commands in R and see what is printed. What task is each statement performing?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>a[a <span class="sc">&lt;</span> <span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>a[a <span class="sc">==</span> <span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>a[(a <span class="sc">&lt;</span> <span class="dv">6</span>)<span class="sc">|</span>(a <span class="sc">==</span> <span class="dv">10</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="helpful-functions" class="level2" data-number="1.9">
<h2 data-number="1.9" class="anchored" data-anchor-id="helpful-functions"><span class="header-section-number">1.9</span> Helpful functions</h2>
<p>We provide a brief overview of R functions we often use in our data analysis.</p>
<section id="general-functions" class="level3" data-number="1.9.1">
<h3 data-number="1.9.1" class="anchored" data-anchor-id="general-functions"><span class="header-section-number">1.9.1</span> General functions</h3>
<p>For brevity, <a href="#tbl-generalfunctions" class="quarto-xref">Table&nbsp;<span>1.2</span></a> provides a table of functions commonly useful for basic data analysis along with a description of their purpose.</p>
<div class="cell">
<div id="tbl-generalfunctions" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-generalfunctions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;1.2: Functions frequently useful for data analysis.
</figcaption>
<div aria-describedby="tbl-generalfunctions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 7%">
<col style="width: 92%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">function.</th>
<th style="text-align: left;">purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>length</code></td>
<td style="text-align: left;">Determines the length/number of elements in an object.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>sum</code></td>
<td style="text-align: left;">Sums the elements in the object.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>mean</code></td>
<td style="text-align: left;">Computes the sample mean of the elements in an object.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>var</code></td>
<td style="text-align: left;">Computes the sample variance of the elements in an object.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>sd</code></td>
<td style="text-align: left;">Computes the sample standard deviation the elements of an object.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>range</code></td>
<td style="text-align: left;">Determines the range (minimum and maximum) of the elements of an object.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>log</code></td>
<td style="text-align: left;">Computes the (natural) logarithm of elements in an object.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>summary</code></td>
<td style="text-align: left;">Returns a summary of an object. The output changes depending on the class type of the object.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>str</code></td>
<td style="text-align: left;">Provides information about the structure of an object. Usually, the class of the object and some information about its size.</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<hr>
</section>
<section id="hands-on-practice-13" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice-13">Hands-on Practice</h3>
<p>Run the following commands in the Console. Determine what task each command is performing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rexp</span>(<span class="dv">100</span>) <span class="co"># sample 100 iid values from an Exponential(1) distribution</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x) <span class="co"># structure of x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="functions-related-to-statistical-distributions" class="level3" data-number="1.9.2">
<h3 data-number="1.9.2" class="anchored" data-anchor-id="functions-related-to-statistical-distributions"><span class="header-section-number">1.9.2</span> Functions related to statistical distributions</h3>
<p>R is designed specifically for statistical analysis, so it natively includes functionality for determining properties of statistical distributions. R makes it easy to evaluate the cumulative distribution function (CDF) of a distribution, the quantiles of a distribution, the density or mass of a distribution, and to sample random values from a distribution.</p>
<p>Suppose that a random variable <span class="math inline">\(X\)</span> has the <code>dist</code> distribution. The function templates in the list below describe how to obtain certain properties of <span class="math inline">\(X\)</span>.</p>
<ul>
<li><code>p[dist](q, ...)</code>: returns the cdf of <span class="math inline">\(X\)</span> evaluated at <code>q</code>, i.e., <span class="math inline">\(p=P(X\leq q)\)</span>.</li>
<li><code>q[dist](p, ...)</code>: returns the inverse cdf (or quantile function) of <span class="math inline">\(X\)</span> evaluated at <span class="math inline">\(p\)</span>, i.e., <span class="math inline">\(q = \inf\{x: P(X\leq x) \geq p\}\)</span>.</li>
<li><code>d[dist](x, ...)</code>: returns the mass or density of <span class="math inline">\(X\)</span> evaluated at <span class="math inline">\(x\)</span> (depending on whether <span class="math inline">\(X\)</span> is a discrete or continuous random variable).</li>
<li><code>r[dist](n, ...)</code>: returns an independent and identically distributed random sample of size <code>n</code> having the same distribution as <span class="math inline">\(X\)</span>.</li>
<li>The <code>...</code> indicates that additional arguments describing the parameters of the distribution may be required.</li>
</ul>
<p>To determine the distributions available by default in R, run <code>?Distributions</code> in the R Console. We demonstrate some of this functionality in the practice below.</p>
<p>Note: If we are using functions related to statistical distributions in R, then it is imperative that we look at the associated documentation to determine the parameterization of the distribution, as this dramatically impacts the results. Some distributions have multiple common parameterizations.</p>
<hr>
</section>
<section id="hands-on-practice-14" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice-14">Hands-on Practice</h3>
<p>Run the following commands in R to see the output. Before each command is a description of the action performed by the command.</p>
<p><code>pnorm(1.96, mean = 0, sd = 1)</code> returns the probability that a standard normal random variable is less than or equal to 1.96, i.e., <span class="math inline">\(P(X \leq 1.96)\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pnorm</span>(<span class="fl">1.96</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>qunif(0.6, min = 0, max = 1)</code> returns the value <span class="math inline">\(x\)</span> such that <span class="math inline">\(P(X\leq x) = 0.6\)</span> for a uniform random variable on the interval <span class="math inline">\([0, 1]\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qunif</span>(<span class="fl">0.6</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>dbinom(2, size = 20, prob = .2)</code> returns the probability that <span class="math inline">\(X\)</span> equals 2 when <span class="math inline">\(X\)</span> has a Binomial distribution with <span class="math inline">\(n=20\)</span> trials and the probability of a successful trial is <span class="math inline">\(0.2\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbinom</span>(<span class="dv">2</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">prob =</span> .<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>dexp(1, rate = 2)</code> evaluates the density of an exponential random variable with mean = 1/2 (i.e., the reciprocal of the <code>rate</code>) at <span class="math inline">\(x=1\)</span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dexp</span>(<span class="dv">1</span>, <span class="at">rate =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>rchisq(10, df = 5)</code> draws a sample of 10 observations from a chi-squared random variable with 5 degrees of freedom.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rchisq</span>(<span class="dv">10</span>, <span class="at">df =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="data-frames" class="level2" data-number="1.10">
<h2 data-number="1.10" class="anchored" data-anchor-id="data-frames"><span class="header-section-number">1.10</span> Data Frames</h2>
<p>Data frames are a <em>fundamental</em> data structure used by most of R’s modeling functions. Data frames are two-dimensional data objects where each column of a data frame is a vector (or variable) of possibly different data types. The class of a <strong>base</strong> R data frame is <code>data.frame</code>, which is technically a specially structured <code>list</code>.</p>
<p>In general, we prefer our data to be <em>tidy</em>, which means that each variable forms a column of the data frame, and each observation forms a row.</p>
<section id="direct-creation-1" class="level3" data-number="1.10.1">
<h3 data-number="1.10.1" class="anchored" data-anchor-id="direct-creation-1"><span class="header-section-number">1.10.1</span> Direct creation</h3>
<p>Data frames are directly created by passing vectors into the <code>data.frame</code> function. The names of the columns in the data frame are the names of the vectors we give the <code>data.frame</code> function. Consider the following simple example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># simple data frame creation</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>e <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"white"</span>, <span class="st">"blue"</span>, <span class="cn">NA</span>)</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(d,e,f)</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  d     e     f
1 1   red  TRUE
2 2 white  TRUE
3 3  blue  TRUE
4 4  &lt;NA&gt; FALSE</code></pre>
</div>
</div>
<p>The columns of a data frame can be renamed using the <code>names</code> function on the data frame and assigning a vector of names to the data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># name columns of data frame</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ID"</span>, <span class="st">"Color"</span>, <span class="st">"Passed"</span>)</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID Color Passed
1  1   red   TRUE
2  2 white   TRUE
3  3  blue   TRUE
4  4  &lt;NA&gt;  FALSE</code></pre>
</div>
</div>
<p>The columns of a data frame can be named when we create the data frame by using the syntax <code>name =</code> for each vector of data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create data frame with better column names</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ID =</span> d, <span class="at">Color =</span> e, <span class="at">Passed =</span> f)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ID Color Passed
1  1   red   TRUE
2  2 white   TRUE
3  3  blue   TRUE
4  4  &lt;NA&gt;  FALSE</code></pre>
</div>
</div>
</section>
<section id="importing-data" class="level3" data-number="1.10.2">
<h3 data-number="1.10.2" class="anchored" data-anchor-id="importing-data"><span class="header-section-number">1.10.2</span> Importing Data</h3>
<p>Direct creation of data frames is only appropriate for very small data sets. In practice, we will import data from a file into R.</p>
<p>The <code>read.table</code> function imports data in table format from file into R as a data frame.</p>
<p>The basic usage of this function is: <code>read.table(file, header = TRUE, sep = ",")</code>.</p>
<ul>
<li><code>file</code> is the file path and name of the file we want to import into R.
<ul>
<li>If we don’t know the file path, setting <code>file = file.choose()</code> will bring up a dialog box asking us to locate the file we want to import.</li>
</ul></li>
<li><code>header</code> specifies whether the data file has a header (variable labels for each column of data in the first row of the data file).
<ul>
<li>If we don’t specify this option in R or specify <code>header = FALSE</code>, then R will assume the file doesn’t have any headings.</li>
<li><code>header = TRUE</code> tells R to read in the data as a data frame with column names taken from the first row of the data file.</li>
</ul></li>
<li><code>sep</code> specifies the delimiter separating elements in the file.
<ul>
<li>If each column of data in the file is separated by a space, then use <code>sep = " "</code>.</li>
<li>If each column of data in the file is separated by a comma, then use <code>sep = ","</code>.</li>
<li>If each column of data in the file is separated by a tab, then use <code>sep = "\t"</code>.</li>
</ul></li>
</ul>
<hr>
</section>
<section id="hands-on-practice-15" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="hands-on-practice-15">Hands-on Practice</h3>
<p>Consider reading in a csv (comma separated file) with a header.</p>
<p>The file in question is available in the <strong>api2lm package</strong> <span class="citation" data-cites="R-api2lm">(<a href="references.html#ref-R-api2lm" role="doc-biblioref">French 2023</a>)</span> and contains crime-related information for U.S. states for the year 2009. However, we will import the data directly from a location where it is stored on GitHub.</p>
<p>In the code below, we specify the path of the file prior to specifying the file name (<code>crime2009.csv</code>). Since the file has a header, we specify <code>header = TRUE</code>. Since the data values are separated by commas, we specify <code>sep = ","</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># specify file path</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/jfrench/api2lm/main/inst/extdata/crime2009.csv"</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="co"># import data as data frame</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>crime2009 <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="at">file =</span> path, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="co"># view data structure</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(crime2009)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   51 obs. of  8 variables:
 $ state  : chr  "Alabama" "Alaska" "Arizona" "Arkansas" ...
 $ violent: num  460 633 423 530 473 ...
 $ murder : num  7.1 3.2 5.5 6.3 5.4 3.2 3 4.6 24.2 5.5 ...
 $ hs_grad: num  82.1 91.4 84.2 82.4 80.6 89.3 88.6 87.4 87.1 85.3 ...
 $ poverty: num  17.5 9 16.5 18.8 14.2 12.9 9.4 10.8 18.4 14.9 ...
 $ single : num  29 25.5 25.7 26.3 27.8 21.4 25 27.6 48 26.6 ...
 $ white  : num  70 68.3 80 78.4 62.7 84.6 79.1 71.9 38.7 76.9 ...
 $ urban  : num  48.6 44.5 80.1 39.5 89.7 ...</code></pre>
</div>
</div>
<p>Running <code>str</code> on the data frame gives us a general picture of the values stored in the data frame, the variable names, and the default variable types.</p>
<p>The <code>read_table</code> function in the <strong>readr</strong> package <span class="citation" data-cites="R-readr">(<a href="references.html#ref-R-readr" role="doc-biblioref">Wickham, Hester, and Bryan 2024</a>)</span> is arguably a better way of importing tabular data from file and uses similar syntax. We can import data contained in a Microsoft Excel file using functions available in the <strong>readxl</strong> package <span class="citation" data-cites="R-readxl">(<a href="references.html#ref-R-readxl" role="doc-biblioref">Wickham and Bryan 2023</a>)</span>.</p>
<hr>
</section>
<section id="extracting-parts-of-a-data-frame" class="level3" data-number="1.10.3">
<h3 data-number="1.10.3" class="anchored" data-anchor-id="extracting-parts-of-a-data-frame"><span class="header-section-number">1.10.3</span> Extracting parts of a data frame</h3>
<p>R provides many ways to extract parts of a data frame. We will provide several examples using the <code>mtcars</code> data frame in the <strong>datasets</strong> package.</p>
<p>The <code>mtcars</code> data frame has 32 observations for 11 variables. The variables are:</p>
<ul>
<li><code>mpg</code>: miles per gallon.</li>
<li><code>cyl</code>: number of cylinders.</li>
<li><code>disp</code>: engine displacement (cubic inches).</li>
<li><code>hp</code>: horsepower.</li>
<li><code>drat</code>: rear axle ratio.</li>
<li><code>wt</code>: weight in 1000s of pounds.</li>
<li><code>qsec</code>: time in seconds to travel 0.25 of a mile.</li>
<li><code>vs</code>: engine shape (0 = V-shaped, 1 = straight).</li>
<li><code>am</code>: transmission type (0 = automatic, 1 = manual).</li>
<li><code>gear</code>: number of forward gears.</li>
<li><code>carb</code>: number of carburetors.</li>
</ul>
<p>We load the data set and examine the basic structure by running the commands below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mtcars) <span class="co"># load data set</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars)  <span class="co"># examine data structure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   32 obs. of  11 variables:
 $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
 $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
 $ disp: num  160 160 108 258 360 ...
 $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
 $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
 $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
 $ qsec: num  16.5 17 18.6 19.4 17 ...
 $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
 $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
 $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
 $ carb: num  4 4 1 1 2 1 4 2 2 4 ...</code></pre>
</div>
</div>
<p>We should do some data cleaning on this data set (see <a href="data-exploration.html" class="quarto-xref"><span>Chapter 2</span></a>), but we will refrain from this for simplicity.</p>
<hr>
<section id="sec-direct-extraction" class="level4" data-number="1.10.3.1">
<h4 data-number="1.10.3.1" class="anchored" data-anchor-id="sec-direct-extraction"><span class="header-section-number">1.10.3.1</span> Direct extraction</h4>
<p>The column variables of a data frame may be extracted from a data frame by specifying the data frame’s name, then <code>$</code>, and then specifying the name of the desired variable. This pulls the actual variable vector out of the data frame, so the thing extracted is a vector, not a data frame.</p>
<p>Below, we extract the <code>mpg</code> variable from the <code>mtcars</code> data frame.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>mpg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
[16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
[31] 15.0 21.4</code></pre>
</div>
</div>
<p>Another way to extract a variable from a data frame as a vector is <code>df[, "var"]</code>, where <code>df</code> is the name of our data frame and <code>var</code> is the desired variable name. We extract the <code>mpg</code> vector from <code>mtcars</code> below.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>mtcars[,<span class="st">"mpg"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 21.0 21.0 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 17.8 16.4 17.3 15.2 10.4
[16] 10.4 14.7 32.4 30.4 33.9 21.5 15.5 15.2 13.3 19.2 27.3 26.0 30.4 15.8 19.7
[31] 15.0 21.4</code></pre>
</div>
</div>
<p>The syntax above is a special case of extracting information from a data frame using <code>df[rows, columns]</code> style syntax, where <code>rows</code> and <code>columns</code> indicate the desired rows or columns to extract. If either the <code>rows</code> or <code>columns</code> are left blank, then all <code>rows</code> or <code>columns</code>, respectively, are extracted.</p>
<p>The <code>df[rows, columns]</code> syntax has confusing behavior when we only specify a single column. Specifically, the <code>[</code> operator has a <code>drop</code> argument that is set to <code>TRUE</code> by default. The <code>drop</code> argument controls whether the result is coerced to the lowest possible dimension. If we we only extract a single column of our data frame using <code>[</code>, then R will coerce the result to a vector by default.</p>
<p>To get around the default <code>drop</code> behavior we can change the <code>drop</code> argument to <code>FALSE</code>, as shown below. We only retain the first 5 rows for brevity.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract mpg variable, keep as data frame</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="st">"mpg"</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg
Mazda RX4         21.0
Mazda RX4 Wag     21.0
Datsun 710        22.8
Hornet 4 Drive    21.4
Hornet Sportabout 18.7</code></pre>
</div>
</div>
<p>An easier approach to avoiding the default <code>drop</code> behavior is to use the slightly different syntax <code>df["var"]</code> (notice we no longer have the comma to separate rows and columns). We use this syntax below for the <code>mpg</code> variable in <code>mtcars</code>. For brevity, we use the <code>print</code> method for a <code>data.frame</code> object and specify the <code>max</code> argument to limit the number of data frame entries we print.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract mpg variable, keep as data frame, show only 5 rows</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mtcars[<span class="st">"mpg"</span>], <span class="at">max =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg
Mazda RX4         21.0
Mazda RX4 Wag     21.0
Datsun 710        22.8
Hornet 4 Drive    21.4
Hornet Sportabout 18.7
 [ reached 'max' / getOption("max.print") -- omitted 27 rows ]</code></pre>
</div>
</div>
<p>To select multiple variables in a data frame, we can provide a character vector with multiple variable names between <code>[]</code>. In the example below, we extract both the <code>mpg</code> and <code>cyl</code> variables from <code>mtcars</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mtcars[<span class="fu">c</span>(<span class="st">"mpg"</span>, <span class="st">"cyl"</span>)], <span class="at">max =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl
Mazda RX4         21.0   6
Mazda RX4 Wag     21.0   6
Datsun 710        22.8   4
Hornet 4 Drive    21.4   6
Hornet Sportabout 18.7   8
 [ reached 'max' / getOption("max.print") -- omitted 27 rows ]</code></pre>
</div>
</div>
<p>We can also use numeric indices to directly indicate the rows or columns of the data frame that we would like to extract. We can also combine this syntax style with the syntax styles previously discussed.</p>
<ul>
<li><code>df[1,]</code> accesses the first row of <code>df</code>.</li>
<li><code>df[1:2,]</code> accesses the first two rows of <code>df</code>.</li>
<li><code>df[, 2]</code> accesses the second column of <code>df</code>.</li>
<li><code>df[1:2, 2:3]</code> accesses the information in rows 1 and 2 of columns 2 and 3 of <code>df</code>.</li>
<li><code>df[c(1, 3, 5), c("var1", "var2")]</code> accesses the information in rows 1, 3, and 5 of the <code>var1</code> and <code>var2</code> variables.</li>
</ul>
<p>We practice these techniques below.</p>
<hr>
</section>
<section id="hands-on-practice-16" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="hands-on-practice-16">Hands-on Practice</h4>
<p>Run the following commands in the Console. Determine what task each command is performing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>df3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">numbers =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">characters =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">logicals =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>df3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>df3<span class="sc">$</span>logicals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>df3[<span class="dv">1</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>df3[, <span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>df3[, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>df3[, <span class="fu">c</span>(<span class="st">"numbers"</span>, <span class="st">"logicals"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>df3[<span class="fu">c</span>(<span class="st">"numbers"</span>, <span class="st">"logicals"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="sec-extraction-logical" class="level4" data-number="1.10.3.2">
<h4 data-number="1.10.3.2" class="anchored" data-anchor-id="sec-extraction-logical"><span class="header-section-number">1.10.3.2</span> Extraction using logical expressions</h4>
<p>Logical expressions can be used to subset a data frame.</p>
<p>To select specific rows of a data frame, we use the syntax <code>df[logical vector, ]</code>, where <code>logical vector</code> is a valid logical vector whose length matches the number of rows in the data frame. Usually, the logical vector is created using a logical expression involving one or more data frame variables. In the code below, we extract the rows of the <code>mtcars</code> data frame for which the <code>hp</code> variable is more than 250.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>hp <span class="sc">&gt;</span> <span class="dv">250</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                mpg cyl disp  hp drat   wt qsec vs am gear carb
Ford Pantera L 15.8   8  351 264 4.22 3.17 14.5  0  1    5    4
Maserati Bora  15.0   8  301 335 3.54 3.57 14.6  0  1    5    8</code></pre>
</div>
</div>
<p>We can make the logical expression more complicated and also select specific variables using the syntax discussed in <a href="#sec-direct-extraction" class="quarto-xref"><span>Section 1.10.3.1</span></a>. Below, we extract the rows of <code>mtcars</code> with 8 cylinders and <code>mpg &gt; 17</code>, while extracting only the <code>mpg</code>, <code>cyl</code>, <code>disp</code>, and <code>hp</code> variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># return rows with `cyl == 8` and `mpg &gt; 17`</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="co"># return columns mpg, cyl, disp, hp</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>mtcars[mtcars<span class="sc">$</span>cyl <span class="sc">==</span> <span class="dv">8</span> <span class="sc">&amp;</span> mtcars<span class="sc">$</span>mpg <span class="sc">&gt;</span> <span class="dv">17</span>, <span class="fu">c</span>(<span class="st">"mpg"</span>, <span class="st">"cyl"</span>, <span class="st">"disp"</span>, <span class="st">"hp"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl  disp  hp
Hornet Sportabout 18.7   8 360.0 175
Merc 450SL        17.3   8 275.8 180
Pontiac Firebird  19.2   8 400.0 175</code></pre>
</div>
</div>
</section>
<section id="extraction-using-the-subset-function" class="level4" data-number="1.10.3.3">
<h4 data-number="1.10.3.3" class="anchored" data-anchor-id="extraction-using-the-subset-function"><span class="header-section-number">1.10.3.3</span> Extraction using the <code>subset</code> function</h4>
<p>The techniques for extracting parts of a data frame discussed in -<a href="#sec-direct-extraction" class="quarto-xref"><span>Section 1.10.3.1</span></a> and -<a href="#sec-extraction-logical" class="quarto-xref"><span>Section 1.10.3.2</span></a> are the fundamental approaches for selecting desired parts of a data frame. However, these techniques can seem complex and difficult to interpret, particularly when looking back at code we have written in the past. A sleeker approach to extracting part of a data frame is to use the <code>subset</code> function.</p>
<p>The <code>subset</code> function returns the elements of a data frame that meets the specified conditions. The basic usage of this function is: <code>subset(x, subset, select, drop = FALSE)</code></p>
<ul>
<li><code>x</code> is the object we want to subset.
<ul>
<li><code>x</code> can be a vector, matrix, or data frame.</li>
</ul></li>
<li><code>subset</code> is a logical expression that indicates the elements or rows of <code>x</code> to keep (<code>TRUE</code> means keep).</li>
<li><code>select</code> is a vector that indicates the columns to keep.</li>
<li><code>drop</code> is a logical value indicating whether the data frame should “drop” into a vector if only a single row or column is kept. The default is <code>FALSE</code>, meaning that a data frame will always be returned by the <code>subset</code> function by default.</li>
</ul>
<p>There are many clever ways of using <code>subset</code> to select specific parts of a data frame. We encourage the reader to run <code>?base::subset</code> in the Console for more details.</p>
<hr>
</section>
<section id="hands-on-practice-17" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="hands-on-practice-17">Hands-on Practice</h4>
<p>Run the following commands in the Console to use the <code>subset</code> function to extract parts of the <code>mtcars</code> data frame.</p>
<p>The command below subsets the rows of <code>mtcars</code> that have more than 4 gears. Note that any variables referred to in the <code>subset</code> function are assumed to be part of the supplied data frame or are available in memory.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(mtcars, <span class="at">subset =</span> gear <span class="sc">&gt;</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The command below will select the <code>disp</code>, <code>hp</code>, and <code>gear</code> variables of <code>mtcars</code> but will exclude the other columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(mtcars, <span class="at">select =</span> <span class="fu">c</span>(disp, hp, gear))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Lastly, we can use the following command to perform the two previous subsetting actions in one step.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(mtcars, <span class="at">subset =</span> gear <span class="sc">&gt;</span> <span class="dv">4</span>, <span class="at">select =</span> <span class="fu">c</span>(disp, hp, gear))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>An advantage of the <code>subset</code> function is that it makes code easily readable. Using conventional base R syntax, the final code example above would be: <code>mtcars[mtcars$gear&gt;4, c("disp", "hp", "gear")]</code>.</p>
<p>It can be difficult to look at base R code and immediately tell what it happening, so the <code>subset</code> function adds clarity. This is important for collaborating with others, including our future selves!</p>
<hr>
</section>
</section>
<section id="modifying-a-data-frame" class="level3" data-number="1.10.4">
<h3 data-number="1.10.4" class="anchored" data-anchor-id="modifying-a-data-frame"><span class="header-section-number">1.10.4</span> Modifying a Data Frame</h3>
<p>Columns can be added to a data frame using <code>$</code> and the assignment operator. In the example below, we add a new column, <code>kpg</code>, to the <code>mtcars</code> data set based on a transformatino of the <code>mpg</code> column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>kpg <span class="ot">&lt;-</span> mtcars<span class="sc">$</span>mpg<span class="sc">*</span><span class="fl">1.6</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb   kpg
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4 33.60
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4 33.60
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1 36.48
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1 34.24
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2 29.92
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1 28.96</code></pre>
</div>
</div>
</section>
</section>
<section id="using-the-pipe-operator" class="level2" data-number="1.11">
<h2 data-number="1.11" class="anchored" data-anchor-id="using-the-pipe-operator"><span class="header-section-number">1.11</span> Using the pipe operator</h2>
<p>R’s native pipe operator (<code>|&gt;</code>) allows us to “pipe” the object on the left side of the operator into the first argument of the function on the right side of the operator. There are ways to modify this default behavior, but we will not discuss them.</p>
<p>The pipe operator is a convenient way to string together numerous steps in a string of commands. This coding style is generally considered more readable than other approaches because we can incrementally modify the object through each pipe, and each step of the pipe is easy to understand. Ultimately, it’s a stylistic choice that we can decide to adopt or ignore.</p>
<p>Consider the following approaches to extracting part of <code>mtcars</code>. We choose the rows for which engine displacement is more than 400 and only keep the <code>mpg</code>, <code>disp</code>, and <code>hp</code> columns. We first do this in a single function call using the <code>subset</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># two styles for selecting certain rows and columns of mtcars</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(mtcars,</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">subset =</span> disp <span class="sc">&gt;</span> <span class="dv">400</span>,</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">select =</span> <span class="fu">c</span>(mpg, disp, hp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg disp  hp
Cadillac Fleetwood  10.4  472 205
Lincoln Continental 10.4  460 215
Chrysler Imperial   14.7  440 230</code></pre>
</div>
</div>
<p>Next, we use the piping approach to break the action into smaller parts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">subset =</span> disp <span class="sc">&gt;</span> <span class="dv">400</span>) <span class="sc">|&gt;</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="fu">c</span>(mpg, disp, hp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     mpg disp  hp
Cadillac Fleetwood  10.4  472 205
Lincoln Continental 10.4  460 215
Chrysler Imperial   14.7  440 230</code></pre>
</div>
</div>
<p>When reading code with pipes, the pipe can be thought of as the word “then”. In the code above, we take <code>mtcars</code> <em>then</em> subset it based on <code>disp</code> and <em>then</em> select some columns.</p>
<p>Most parts of the world do not use miles per gallon to measure fuel economy because they don’t measure distance in miles nor volume in gallons. A common measure of fuel economy is the liters of fuel required to travel 100 kilometers. Noting that 3.8 liters is approximately equivalent to 1 U.S. gallon and 1.6 kilometers is approximately equivalent to 1 mile, we can convert fuel economy of <span class="math inline">\(x\)</span> miles per gallon to liters per 100 kilometers by noting:</p>
<p><span class="math display">\[\frac{1}{x}\frac{\mathrm{gal}}{\mathrm{mi}}\times\frac{3.8}{1}\frac{\mathrm{L}}{\mathrm{gal}}\times\frac{1}{1.6}\frac{\mathrm{mi}}{\mathrm{km}}\times\frac{100\;\mathrm{km}}{100\;\mathrm{km}} = \frac{237.5}{x}\frac{\mathrm{L}}{100\;\mathrm{km}}.\]</span></p>
<p>Thus, to convert from miles per gallon to liters per 100 kilometers, we take 237.5 and divide by the number of miles per gallon.</p>
<p>We consider two approaches for converting the units of a variable in miles per gallon to liters per 100 km. In the first approach, we use the <code>base::transform</code> function create a new variable, <code>lp100km</code>, in the <code>mtcars</code> data frame that describes the liters of fuel each car requires to travel 100 kilometers and assign it the name <code>mtcars2</code>. Then we select only the columns <code>mpg</code> and <code>lp100km</code> from <code>mtcars</code> and assign it the name <code>mtcars3</code>. We then use the <code>head</code> function to print only the first 5 observations. Run <code>?base::transform</code> in the Console for more details and examples.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new variable</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>mtcars2 <span class="ot">&lt;-</span> <span class="fu">transform</span>(mtcars, <span class="at">lp100km =</span> <span class="fl">237.5</span><span class="sc">/</span>mpg)</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="co"># select certain columns</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>mtcars3 <span class="ot">&lt;-</span> <span class="fu">subset</span>(mtcars2, <span class="at">select =</span> <span class="fu">c</span>(mpg, lp100km))</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a><span class="co"># print first 5 rows</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars3, <span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg  lp100km
Mazda RX4         21.0 11.30952
Mazda RX4 Wag     21.0 11.30952
Datsun 710        22.8 10.41667
Hornet 4 Drive    21.4 11.09813
Hornet Sportabout 18.7 12.70053</code></pre>
</div>
</div>
<p>Next, we perform the actions above with pipes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create new variable, select columns, extract first 5 rows</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transform</span>(<span class="at">lp100km =</span> <span class="fl">237.5</span><span class="sc">/</span>mpg) <span class="sc">|&gt;</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="fu">c</span>(mpg, lp100km)) <span class="sc">|&gt;</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg  lp100km
Mazda RX4         21.0 11.30952
Mazda RX4 Wag     21.0 11.30952
Datsun 710        22.8 10.41667
Hornet 4 Drive    21.4 11.09813
Hornet Sportabout 18.7 12.70053</code></pre>
</div>
</div>
</section>
<section id="dealing-with-common-problems" class="level2" data-number="1.12">
<h2 data-number="1.12" class="anchored" data-anchor-id="dealing-with-common-problems"><span class="header-section-number">1.12</span> Dealing with common problems</h2>
<p>We are going to have to deal with many errors and problems as we use R. It happens even to the best programmers.</p>
<p>Every problem is unique, but there are common mistakes that we try to provide insight for below.</p>
<section id="error-in-...-could-not-find-function-..." class="level3" data-number="1.12.1">
<h3 data-number="1.12.1" class="anchored" data-anchor-id="error-in-...-could-not-find-function-..."><span class="header-section-number">1.12.1</span> <code>Error in ...: could not find function "..."</code></h3>
<p>We probably forgot to load the package needed to use the function. We may also have misspelled the function name.</p>
</section>
<section id="error-object-...-not-found" class="level3" data-number="1.12.2">
<h3 data-number="1.12.2" class="anchored" data-anchor-id="error-object-...-not-found"><span class="header-section-number">1.12.2</span> <code>Error: object '...' not found</code></h3>
<p>The object doesn’t exist in loaded memory. Perhaps we forget to assign that name to an object or misspelled the name of the object we are trying to access.</p>
</section>
<section id="error-in-plot.new-figure-margins-too-large" class="level3" data-number="1.12.3">
<h3 data-number="1.12.3" class="anchored" data-anchor-id="error-in-plot.new-figure-margins-too-large"><span class="header-section-number">1.12.3</span> <code>Error in plot.new() : figure margins too large</code></h3>
<p>This typically happens because our Plots pane is too small. We should increase the size of the Plots pane and try again.</p>
</section>
<section id="code-was-working-but-isnt-anymore" class="level3" data-number="1.12.4">
<h3 data-number="1.12.4" class="anchored" data-anchor-id="code-was-working-but-isnt-anymore"><span class="header-section-number">1.12.4</span> Code was working, but isn’t anymore</h3>
<p>We may have run code out of order. It may work if we run it in order. Or we may have run something in the Console that we don’t have in our Script file. It is good practice to clear our environment (the objects R has loaded in memory) using the broom icon in the Environment pane and rerunning our entire Script file to ensure it behaves as expected. The broom icon is shown in <a href="#fig-broom-button" class="quarto-xref">Figure&nbsp;<span>1.4</span></a>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-broom-button" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-broom-button-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/broom_button.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-broom-button-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1.4: The broom icon can be clicked to clear the objects loaded in the Environment.
</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="ecosystem-debate" class="level2" data-number="1.13">
<h2 data-number="1.13" class="anchored" data-anchor-id="ecosystem-debate"><span class="header-section-number">1.13</span> Ecosystem debate</h2>
<p>In general, we favor performing analysis using <strong>base</strong> R functionality, which means we try to perform our analysis with features R offers by default. <strong>Base</strong> R code is easier to maintain since <strong>base</strong> R features change very slowly and are nearly always backwards compatible. Additionally, <strong>base</strong> R functions are often faster than alternatives. However, more complicated aspects of regression analysis are not easy to perform using <strong>base</strong> R, so we will introduce new packages and functions as we progress.</p>
<p>Many readers may have previous experience working with the <strong>tidyverse</strong> (<a href="https://www.tidyverse.org" class="uri">https://www.tidyverse.org</a>) and wonder how frequently we use <strong>tidyverse</strong> functionality. The <strong>tidyverse</strong> offers a unified framework for data manipulation and visualization that tends to be more consistent than <strong>base</strong> R. However, there are many situations where a <strong>base</strong> R solution is more straightforward than a <strong>tidyverse</strong> solution, not to mention the fact that there are many aspects of R programming (e.g., S3 and S4 objects, method dispatch) that require knowledge of <strong>base</strong> R features. Because the R universe is vast and there are many competing coding styles, we will prioritize analysis approaches using <strong>base</strong> R, which gives users a stronger programming foundation. However, we will use parts of the <strong>tidyverse</strong> when it greatly simplifies analysis, data manipulation, or visualization because it provides an extremely useful feature set.</p>
</section>
<section id="going-deeper" class="level2" data-number="1.14">
<h2 data-number="1.14" class="anchored" data-anchor-id="going-deeper"><span class="header-section-number">1.14</span> Going deeper</h2>
<section id="sec-comparing-assgn-op" class="level3" data-number="1.14.1">
<h3 data-number="1.14.1" class="anchored" data-anchor-id="sec-comparing-assgn-op"><span class="header-section-number">1.14.1</span> Comparing assignment operators</h3>
<p>As previously mentioned in Section <a href="#sec-assignment" class="quarto-xref"><span>Section 1.3</span></a>, both <code>&lt;-</code> and <code>=</code> can mostly be used interchangeably for assignment. But there are times when using <code>=</code> for assignment can be problematic. Consider the examples below where we want to use <code>system.time</code> to time how long it takes to draw 100 values from a standard normal distribution and assign it the name <code>result</code>.</p>
<p>This code works:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(result <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   user  system elapsed 
      0       0       0 </code></pre>
</div>
</div>
<p>This code doesn’t work:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(<span class="at">result =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in system.time(result = rnorm(100)): unused argument (result = rnorm(100))</code></pre>
</div>
</div>
<p>What’s the difference? In the second case, R thinks we are setting the <code>result</code> argument of the <code>system.time</code> function (which doesn’t exist) to the value produced by <code>rnorm(100)</code>.</p>
<p>Thus, it is best to use <code>&lt;-</code> for assigning a name to an object and reserving <code>=</code> for specifying function arguments.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-R-api2lm" class="csl-entry" role="listitem">
French, Joshua P. 2023. <em>Api2lm: Functions and Data Sets for the Book "a Progressive Introduction to Linear Models"</em>. <a href="https://CRAN.R-project.org/package=api2lm">https://CRAN.R-project.org/package=api2lm</a>.
</div>
<div id="ref-R-tibble" class="csl-entry" role="listitem">
Müller, Kirill, and Hadley Wickham. 2023. <em>Tibble: Simple Data Frames</em>. <a href="https://tibble.tidyverse.org/">https://tibble.tidyverse.org/</a>.
</div>
<div id="ref-R-base" class="csl-entry" role="listitem">
R Core Team. 2024. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-advancedr" class="csl-entry" role="listitem">
Wickham, Hadley. 2019. <em>Advanced <span>R</span></em>. CRC press. <a href="http://adv-r.had.co.nz/">http://adv-r.had.co.nz/</a>.
</div>
<div id="ref-R-forcats" class="csl-entry" role="listitem">
———. 2023a. <em>Forcats: Tools for Working with Categorical Variables (Factors)</em>. <a href="https://forcats.tidyverse.org/">https://forcats.tidyverse.org/</a>.
</div>
<div id="ref-R-stringr" class="csl-entry" role="listitem">
———. 2023b. <em>Stringr: Simple, Consistent Wrappers for Common String Operations</em>. <a href="https://stringr.tidyverse.org">https://stringr.tidyverse.org</a>.
</div>
<div id="ref-R-tidyverse" class="csl-entry" role="listitem">
———. 2023c. <em>Tidyverse: Easily Install and Load the Tidyverse</em>. <a href="https://tidyverse.tidyverse.org">https://tidyverse.tidyverse.org</a>.
</div>
<div id="ref-R-readxl" class="csl-entry" role="listitem">
Wickham, Hadley, and Jennifer Bryan. 2023. <em>Readxl: Read Excel Files</em>. <a href="https://readxl.tidyverse.org">https://readxl.tidyverse.org</a>.
</div>
<div id="ref-R-ggplot2" class="csl-entry" role="listitem">
Wickham, Hadley, Winston Chang, Lionel Henry, Thomas Lin Pedersen, Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani, Dewey Dunnington, and Teun van den Brand. 2024. <em>Ggplot2: Create Elegant Data Visualisations Using the Grammar of Graphics</em>. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.
</div>
<div id="ref-R-dplyr" class="csl-entry" role="listitem">
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://dplyr.tidyverse.org">https://dplyr.tidyverse.org</a>.
</div>
<div id="ref-R-purrr" class="csl-entry" role="listitem">
Wickham, Hadley, and Lionel Henry. 2023. <em>Purrr: Functional Programming Tools</em>. <a href="https://purrr.tidyverse.org/">https://purrr.tidyverse.org/</a>.
</div>
<div id="ref-R-readr" class="csl-entry" role="listitem">
Wickham, Hadley, Jim Hester, and Jennifer Bryan. 2024. <em>Readr: Read Rectangular Text Data</em>. <a href="https://readr.tidyverse.org">https://readr.tidyverse.org</a>.
</div>
<div id="ref-R-tidyr" class="csl-entry" role="listitem">
Wickham, Hadley, Davis Vaughan, and Maximilian Girlich. 2024. <em>Tidyr: Tidy Messy Data</em>. <a href="https://tidyr.tidyverse.org">https://tidyr.tidyverse.org</a>.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Preliminaries">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Preliminaries</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data-exploration.html" class="pagination-link" aria-label="Data Cleaning and Exploration">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data Cleaning and Exploration</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>